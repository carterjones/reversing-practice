#!/usr/bin/env bash

nasm -f elf64 shellcode.asm
ld shellcode.o -o shellcode
# This line is from https://stackoverflow.com/a/24438505.
shellcode=$(for i in $(objdump -d shellcode | tr '\t' ' ' | tr ' ' '\n' | grep -E '^[0-9a-f]{2}$' ); do echo -n "\\x$i" ; done)
# shellcheck disable=SC2059
printf "${shellcode}" > shellcode.bin
./payloader.py
